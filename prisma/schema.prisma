generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}

model Participant {
  id        String                 @id @default(uuid())
  firstname String
  lastname  String
  createdAt DateTime               @default(now())
  updatedAt DateTime               @updatedAt
  statuses  ParticipantStatusMap[]
}

model Site {
  id       String                 @id @default(uuid())
  name     String
  statuses ParticipantStatusMap[]
}

model ParticipantStatus {
  id                   String                 @id @default(uuid())
  description          String
  participantStatusMap ParticipantStatusMap[]
}

model ParticipantStatusMap {
  participantId String
  siteId        String
  statusId      String
  date          DateTime
  effectiveDate DateTime
  status        ParticipantStatus @relation(fields: [statusId], references: [id])
  site          Site              @relation(fields: [siteId], references: [id])
  participant   Participant       @relation(fields: [participantId], references: [id])

  @@id([participantId, siteId])
}
